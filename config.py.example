# -*- coding: utf-8 -*-
"""
æ¸¯è‚¡æœŸæƒå¤§å•ç›‘æ§é…ç½®æ–‡ä»¶
"""

# Futu OpenD é…ç½®
FUTU_CONFIG = {
    'host': '127.0.0.1',
    'port': 11111,
    'unlock_pwd': '',  # è¯·å¡«å…¥ä½ çš„äº¤æ˜“å¯†ç 
    'market': 'HK',    # æ¸¯è‚¡å¸‚åœº
}

# ç›‘æ§çš„æ¸¯è‚¡è‚¡ç¥¨ä»£ç åˆ—è¡¨ (æ¸¯è‚¡æ ¼å¼: HK.00700)
MONITOR_STOCKS = [
    'HK.00700',  # è…¾è®¯æ§è‚¡
    'HK.09988',  # é˜¿é‡Œå·´å·´
    'HK.03690',  # ç¾å›¢
    'HK.01810',  # å°ç±³é›†å›¢
    'HK.09618',  # äº¬ä¸œé›†å›¢
    'HK.02318',  # ä¸­å›½å¹³å®‰
    'HK.00388',  # é¦™æ¸¯äº¤æ˜“æ‰€
    'HK.00981',  # ä¸­èŠ¯å›½é™…
]

# æœŸæƒå¤§å•ç­›é€‰æ¡ä»¶ï¼ˆé»˜è®¤é˜ˆå€¼ + æŒ‰è‚¡ç¥¨è¦†ç›–ï¼‰
DEFAULT_OPTION_FILTER = {
    'min_volume': 10,        # æœ€å°æˆäº¤é‡ 
    'min_turnover': 10000,   # æœ€å°æˆäº¤é¢ (æ¸¯å¸) 
    'min_premium': 0.01,     # æœ€å°æƒåˆ©é‡‘
    'price_range': 0.15,     # ä»·æ ¼èŒƒå›´
}

# æ¯åªè‚¡ç¥¨çš„è‡ªå®šä¹‰è¿‡æ»¤é˜ˆå€¼ï¼ˆè¦†ç›–é»˜è®¤å€¼ï¼Œæœªé…ç½®çš„å­—æ®µæ²¿ç”¨é»˜è®¤ï¼‰
OPTION_FILTERS = {
    # ç¤ºä¾‹ï¼šè…¾è®¯æ§è‚¡
    'HK.00700': {
        'min_volume': 20,
        'min_turnover': 20000,
    },
    # ç¤ºä¾‹ï¼šé˜¿é‡Œå·´å·´
    'HK.09988': {
        'min_volume': 15,
        'min_turnover': 15000,
    },
    # å¦‚éœ€ä¸ºæ›´å¤šè‚¡ç¥¨è®¾ç½®ï¼ŒæŒ‰ä¸Šè¿°æ ¼å¼æ·»åŠ 
}

# å…¼å®¹æ—§ç‰ˆä»£ç ï¼šä»æä¾› OPTION_FILTER ä½œä¸ºé»˜è®¤å€¼å¼•ç”¨
OPTION_FILTER = DEFAULT_OPTION_FILTER

# å·¥å…·å‡½æ•°ï¼šè·å–æŸåªè‚¡ç¥¨çš„æœ€ç»ˆè¿‡æ»¤é…ç½®ï¼ˆé»˜è®¤+è¦†ç›–ï¼‰
def get_option_filter(stock_code: str):
    try:
        override = OPTION_FILTERS.get(stock_code, {})
        cfg = DEFAULT_OPTION_FILTER.copy()
        cfg.update(override)
        return cfg
    except Exception:
        return DEFAULT_OPTION_FILTER

# ç›‘æ§æ—¶é—´è®¾ç½®
MONITOR_TIME = {
    'start_time': '09:30:00',  # å¼€å§‹ç›‘æ§æ—¶é—´
    'end_time': '16:00:00',    # ç»“æŸç›‘æ§æ—¶é—´
    'interval': 300,          # ç›‘æ§é—´éš”(ç§’) - 5åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡
    'lookback_days': 2,        # å›çœ‹å¤©æ•°
}

# é€šçŸ¥è®¾ç½®
NOTIFICATION = {
    'enable_console': True,    # æ§åˆ¶å°è¾“å‡º
    'enable_log': True,        # æ—¥å¿—è®°å½•
    'enable_email': False,     # é‚®ä»¶é€šçŸ¥
    'enable_mac_notification': True,  # Macç³»ç»Ÿé€šçŸ¥
    'enable_wework_bot': True,  # ä¼å¾®æœºå™¨äººé€šçŸ¥
    'email_config': {
        'smtp_server': 'smtp.gmail.com',
        'smtp_port': 587,
        'username': '',
        'password': '',
        'to_emails': [],
    },
    'wework_config': {
        'webhook_url': '',  # ä¼å¾®æœºå™¨äººwebhookåœ°å€
        'mentioned_list': [],  # @çš„ç”¨æˆ·åˆ—è¡¨ï¼Œå¦‚ ['@all'] æˆ– ['userid1', 'userid2']
        'mentioned_mobile_list': [],  # @çš„æ‰‹æœºå·åˆ—è¡¨
    }
}

# æ—¥å¿—é…ç½®
LOG_CONFIG = {
    'log_level': 'INFO',
    'log_file': 'logs/option_monitor.log',
    'max_file_size': 10 * 1024 * 1024,  # 10MB
    'backup_count': 5,
}

# æ•°æ®å­˜å‚¨é…ç½®
DATA_CONFIG = {
    'save_to_csv': True,
    'csv_path': 'data/option_trades.csv',
    'save_to_db': False,  # å¯æ‰©å±•æ•°æ®åº“å­˜å‚¨
    'big_options_json': 'data/current_big_option.json',  # å¤§å•æœŸæƒæ±‡æ€»æ–‡ä»¶
}

# Webé¢æ¿é…ç½®
WEB_CONFIG = {
    'host': '0.0.0.0',     # ç›‘å¬åœ°å€
    'port': 8288,          # ç«¯å£å· (é¿å…ä¸AirPlayå†²çª)
    'debug': False,        # è°ƒè¯•æ¨¡å¼
    'auto_reload': True,   # è‡ªåŠ¨é‡è½½
}

# è´¢æŠ¥ç›‘æ§é…ç½®
EARNINGS_CONFIG = {
    # ç›‘æ§çš„å¤©æ•°èŒƒå›´ï¼ˆæœªæ¥å¤šå°‘å¤©å†…çš„è´¢æŠ¥ï¼‰
    'days_ahead': 30,
    
    # è´¢æŠ¥ç›¸å…³çš„æœŸæƒç›‘æ§å¢å¼º
    'earnings_option_filter': {
        'min_volume': 50,      # è´¢æŠ¥æœŸé—´æœ€å°æˆäº¤é‡
        'min_amount': 500000,  # è´¢æŠ¥æœŸé—´æœ€å°æˆäº¤é¢(æ¸¯å¸)
        'days_before_earnings': 7,  # è´¢æŠ¥å‰å‡ å¤©å¼€å§‹é‡ç‚¹ç›‘æ§
        'days_after_earnings': 2,   # è´¢æŠ¥åå‡ å¤©ç»§ç»­ç›‘æ§
    },
    
    # è´¢æŠ¥æé†’é…ç½®
    'notification': {
        'enabled': True,
        'advance_days': [7, 3, 1],  # æå‰å‡ å¤©æé†’
        'message_template': "ğŸ¢ {stock_name}({stock_code}) å°†åœ¨ {days} å¤©å({date})å‘å¸ƒè´¢æŠ¥"
    }
}